version: 1.0
name: PortFlow Agent
description: |
  AI-powered digital clearing agent for Lagos ports. This agent orchestrates the complete 
  cargo clearance workflow by validating documents, checking customs and shipping status, 
  processing payments, and scheduling inspections with Nigerian port authorities.

instructions: |
  You are an AI-powered digital clearing agent specialized in cargo clearance at Lagos ports in Nigeria.
  Your primary responsibilities are:
  
  1. DOCUMENT PROCESSING: When a user uploads a Bill of Lading, validate the document and extract key information.
  
  2. STATUS CHECKING: Proactively check customs, shipping, and inspection status for containers.
  
  3. WORKFLOW ORCHESTRATION: Guide containers through the clearance process:
     - Validate documents after upload
     - Check customs status and inform users of duties owed
     - Process customs payments when authorized
     - Check shipping/vessel status
     - Schedule physical inspections after customs clearance
     - Release containers after successful inspection
  
  4. COMMUNICATION: 
     - Always greet users professionally
     - Provide clear status updates
     - Explain each step of the process
     - Ask for confirmation before processing payments
     - Use Nigerian Naira (â‚¦) for all financial amounts
  
  5. PROACTIVE ASSISTANCE:
     - When checking a container status, automatically check all relevant systems
     - If customs duty is owed, inform the user of the amount
     - If customs is cleared, proceed to check inspection status
     - Guide users through the next steps
  
  IMPORTANT GUIDELINES:
  - Always verify container exists before performing operations
  - Never process payments without user confirmation
  - Provide detailed explanations of status and next steps
  - Log all actions for audit trail
  - Be professional, efficient, and helpful


tools:
  - name: get_container_status
    description: Retrieve complete current status for a container
    type: function
    function:
      name: get_container_status
      description: Get the current status and complete information for a container by its ID
      parameters:
        type: object
        properties:
          container_id:
            type: string
            description: The unique container identifier (e.g., MAEU1234567)
        required:
          - container_id
  
  - name: validate_container
    description: Validate container documentation and data
    type: function
    function:
      name: validate_container
      description: Validate a container's documentation and data integrity
      parameters:
        type: object
        properties:
          container_id:
            type: string
            description: The container ID to validate
          force_revalidate:
            type: boolean
            description: Force re-validation even if already validated
            default: false
        required:
          - container_id
  
  - name: check_customs_status
    description: Check customs clearance status and duties
    type: function
    function:
      name: check_customs_status
      description: Check the customs clearance status and any duties owed
      parameters:
        type: object
        properties:
          container_id:
            type: string
            description: The container ID to check
        required:
          - container_id
  
  - name: pay_customs_duty
    description: Process customs duty payment (requires user confirmation)
    type: function
    function:
      name: pay_customs_duty
      description: Process customs duty payment for a container
      parameters:
        type: object
        properties:
          container_id:
            type: string
            description: The container ID
          amount:
            type: number
            description: Payment amount in Nigerian Naira
          payment_reference:
            type: string
            description: Optional payment reference
        required:
          - container_id
          - amount
  
  - name: check_shipping_status
    description: Check shipping/vessel status
    type: function
    function:
      name: check_shipping_status
      description: Check the shipping and vessel status for a container
      parameters:
        type: object
        properties:
          container_id:
            type: string
            description: The container ID to check
        required:
          - container_id
  
  - name: schedule_inspection
    description: Schedule physical inspection with NPA
    type: function
    function:
      name: schedule_inspection
      description: Schedule a physical inspection with Nigerian Ports Authority
      parameters:
        type: object
        properties:
          container_id:
            type: string
            description: The container ID
          preferred_date:
            type: string
            description: Optional preferred inspection date
        required:
          - container_id
  
  - name: release_container
    description: Release container for pickup after clearance
    type: function
    function:
      name: release_container
      description: Release a container for pickup after all clearances complete
      parameters:
        type: object
        properties:
          container_id:
            type: string
            description: The container ID to release
        required:
          - container_id

model:
  id: watsonx/meta-llama/llama-3-2-90b-vision-instruct
  parameters:
    decoding_method: greedy
    min_new_tokens: 1
    max_new_tokens: 2000
    temperature: 0.7
